# БД
База данных -  совокупность данных, хранимых в соответствии с какой-либо схемой, манипулирование которыми выполняют в соответствии с выбранным ПО для управления.
Признаки БД:
1) хранится в памяти устройства.
2) данные как-то структурированны и систематизированны, для облегчения поиска (не обязательно, например логи)
3) БД включает схему хранения, метаданные и тд (не обязательно, например монго)

Не путать СУБД и БД. БД это сами данные, СУБД это выбранное ПО для управления этими данными.

Практически любая база данных имеет 4 базовые операции:
- Create - добавление данных
- Read/Retreive - чтение, получение данных
- Update - обновление данных
- Delete - удаление данных

Примерная классификация:
- Иерархическая (Аналогия - файловая система)
- Сетевая (Аналогия - сеть железнодорожных станций)
- Реляционная (Упрощенно - табличная)
- Объектно-реляционная
- Объектная
- Функциональная

# Реляционные БД

Relation (отношение) - (упрощенно) таблица, в которой все строки отличаются друг от друга.

Принципы:
- Данные хранятся в таблицах (отношениях), состоящих из столбцов (атрибутов, полей) и строк (кортежей)
- На пересечении строки и столбца находится только одно значение
- У каждого столбца есть свое имя и все значения в этом столбце имеют один тип
- Столбцы располагаются в определенном порядке, в отличие от строк, которые могут быть расположены в произвольном порядке. 
- Минимум 1 столбец. Строк может не быть. 
- Запросы к базе данных возвращают результат в виде таблиц.

Результат запроса - это всегда таблица. Отсюда возможности:

- Результат запроса можно записать в базу в виду таблицы
- Одинаковые результаты двух запросов можно объединить в одну таблицу
- Результат запроса можно использовать в качестве предмета для дальнейших запросов

### Ключи

##### Первичный ключ/Primary key
Явно и однозначно определяет конкретную запись (строку) в таблице БД

*В таблице не может быть двух записей с одинаковым первичным ключом*

Виды по типу
- Логический (естественный) - серия/номер паспорта
- Суррогатный (искусственный) - если логический выделить не удается, просто нумеруешь столбец

Виды по составу
- Простой - 1 атрибут (артикул)
- Составной - несколько атрибутов (серия + номер паспорта)

##### Внешний ключ/Foreign Key
- Внешние ключи позволяют установить связи между таблицами. 
- Внешний ключ устанавливается для столбцов из зависимой, подчиненной таблицы, и указывает на один из столбцов из главной таблицы. 
- Как правило, внешний ключ указывает на первичный ключ из связанной главной таблицы.


Целостность БД - соответствие данных БД правилам, по которым эта база данных строится (значение массы не может быть отрицательным, при ограничении лет не должно быть значений больше миниального заданного и тд.)
Чтобы соблюдать целостность нужны ограничения целостности БД.

Все ограничения целостности можно разделить на четыре категории:
- Целостность полей - все значения в таблицах соответствуют условиям для полей, в которых они вносятся
- Целостность таблицы - все кортежи имеют уникальный primary key, отсутствуют одинаковые кортежи
- Целостность ссылок - подразумевает отношения между первичным ключом (таблицы, на которую ссылаются) и внешним ключом (таблицы, которая ссылается на другую) всегда защищенными. Пока есть связь Primary key из внешней таблицы и foreign key из основной не удаляются и не изменяются.

### Нормализация БД 
это процесс организации данных определенным образом и рекомендации по проектированию. В основном за счет декомпозиции.
То есть таблицы и связи между ними (отношения) создаются в соответствии с правилами. 
В результате обеспечивается нужный уровень безопасности данных, а сама база становится более гибкой. Также устраняются несогласованные зависимости и избыточность. 
По сути - формализованный здравый смысл.

Нормальные формы.
- 1 НФ - в каждой клетке одно значение, нет повторяющихся строк
- 2 НФ - таблица в 1 НФ, есть primary key, все атрибуты зависят от primary key целиком, а не от какой либо его части (основное решение - декомпозиция).
- 3 НФ - таблица во 2 НФ, все аттрибуты зависят ТОЛЬКО от первичного ключа, но не от других аттрибутов
- НФ Бойса-Кодда (усиленная 3 НФ) - таблица в 3 НФ, ключевые аттрибуты не зависят от неключевых
- 4 НФ - таблица в НФ БК, устранены многозначные зависимости (когда на один primary key множество значений из нескольких полей)
- 5 НФ - таблица в 4 НФ, устраняются нетривиальные зависимости, декомпозиция без потерь. Можно выяснить соответствие ТОЛЬКО при знании предметной области. После джойна таблиц будет всегда получаться таблица, которая была до декомпозиции.
- 6 НФ - хз
- Доменно-ключевая НФ - хз


